import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as m}from"./supabase-vDZkBp_j.js";async function u(){const{data:i,error:c}=await m.from("profiles").select("id, full_name");if(c)return;const r=document.getElementById("helper"),n=document.getElementById("recipient");i.sort((t,e)=>t.full_name.localeCompare(e.full_name,void 0,{sensitivity:"base"})),i.forEach(t=>{const e=document.createElement("option");e.value=t.id,e.textContent=t.full_name,r.appendChild(e);const a=document.createElement("option");a.value=t.id,a.textContent=t.full_name,n.appendChild(a)});const l=document.createElement("option");l.value="community",l.textContent="The Friendship Community Circle",n.appendChild(l);const s=document.getElementById("search-helper");s.oninput=function(){const t=s.value.trim().toLowerCase();if(t){for(let e=0;e<r.options.length;e++)if(r.options[e].text.toLowerCase().startsWith(t)){r.selectedIndex=e,r.options[e].scrollIntoView({behavior:"smooth",block:"center"});break}}};const o=document.getElementById("search-recipient");o.oninput=function(){const t=o.value.trim().toLowerCase();if(t){for(let e=0;e<n.options.length;e++)if(n.options[e].text.toLowerCase().startsWith(t)){n.selectedIndex=e,n.options[e].scrollIntoView({behavior:"smooth",block:"center"});break}}}}u();document.getElementById("help-form").onsubmit=async i=>{i.preventDefault();const c=document.getElementById("helper").value,r=document.getElementById("recipient").value,n=parseFloat(document.getElementById("hours").value),l=document.getElementById("details").value,s=Math.round(n*5),o=document.getElementById("form-status");o.textContent="Submitting...",o.style.color="#333";const{error:t}=await m.from("help_given").insert([{helper_id:c,recipient_id:r,details:l,hours:n,tokens:s}]);t?(o.textContent="Error: "+t.message,o.style.color="red"):(o.textContent=`Success! ${s} tokens awarded for ${n} hours of help.`,o.style.color="#2e8b57",document.getElementById("help-form").reset())};
