import"./modulepreload-polyfill-B5Qt9EMX.js";import{s}from"./supabase-vDZkBp_j.js";console.log("Supabase object:",s);(async()=>{const{data:o,error:t}=await s.from("profiles").select("id, full_name"),e=document.getElementById("contributor");if(t){console.error("Error fetching members:",t);return}o.sort((n,r)=>n.full_name.localeCompare(r.full_name,void 0,{sensitivity:"base"})),o.forEach(n=>{const r=document.createElement("option");r.value=n.id,r.textContent=n.full_name,e.appendChild(r)})})();const i=document.getElementById("pci-form"),l=document.getElementById("type"),c=document.getElementById("points");l.addEventListener("change",()=>{const o=l.value;let t=0;if(o==="time"){const e=prompt("Enter the number of hours contributed:");t=parseInt(e,10)*5}else if(o==="item"){const e=prompt("Rate the utility of the item (1-5):"),n=prompt("Rate the effort to acquire the item (1-5):");t=parseInt(e,10)*parseInt(n,10)*2}else if(o==="money"){const e=prompt("Enter the amount donated:");t=parseInt(e,10)/10}c.value=t});i.addEventListener("submit",async o=>{o.preventDefault();const t=i.contributor.value,e=i.type.value,n=i.details.value,r=parseInt(i.points.value,10),{error:a}=await s.from("positive_impact").insert([{contributor_id:t,type:e,details:n,points_awarded:r}]);a?(console.error("Error saving contribution:",a),alert("Failed to save contribution. Please try again.")):(alert("Contribution submitted successfully!"),i.reset())});
