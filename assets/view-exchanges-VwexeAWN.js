import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as f}from"./supabase-vDZkBp_j.js";const t=document.getElementById("offerings-container");async function p(){const{data:{user:d}}=await f.auth.getUser(),{data:o,error:g}=await f.rpc("get_offerings_with_images");if(g){t.innerHTML=`<p style="color: red;">Error loading offerings: ${g.message}</p>`;return}if(!o||o.length===0){t.innerHTML="<p>There are no visible offerings at this time.</p>";return}t.innerHTML="";for(const e of o){const a=document.createElement("div");a.className="offering-card";let n=`<h3>${e.full_name||"A Circle Member"}</h3>`;const s=e.images;if(s&&s.length>0){const r=(await Promise.all(s.map(async i=>{if(!i)return null;const{data:c}=await f.storage.from("offer-images").createSignedUrl(i,3600);return c?.signedUrl}))).filter(Boolean);r.length>0&&(n+='<div style="display:flex; flex-wrap:wrap; gap:8px; margin-bottom:1rem;">',n+=r.map(i=>`<a href="${i}" target="_blank"><img src="${i}" style="width:80px; height:80px; object-fit:cover; border-radius:6px;"></a>`).join(""),n+="</div>")}if(e.want&&(n+=`<p><strong>ğŸŒ± Seeks:</strong> ${e.want}</p>`),e.give&&(n+=`<p><strong>ğŸŒ¾ Offers:</strong> ${e.give}</p>`),e.passion&&(n+=`<p><strong>ğŸ”¥ Passionate About:</strong> ${e.passion}</p>`),d&&e.user_id===d.id)n+='<div class="self-note">This is your offering.</div>';else{const l=e.full_name||"this member";if(e.user_id&&(n+=`<a href="message-center.html?to=${encodeURIComponent(e.user_id)}" class="respond-button" style="display:inline-block;margin:8px 8px 0 0;padding:8px 16px;background:#2e8b57;color:#fff;border-radius:6px;text-decoration:none;font-weight:bold;">ğŸ’¬ Chat with ${l}</a>`),e.email){const r=`mailto:${e.email}?subject=Response to your Circle of Exchange offering`;n+=`<a href="${r}" class="respond-button" style="display:inline-block;margin:8px 0 0 0;padding:8px 16px;background:#4a7c59;color:#fff;border-radius:6px;text-decoration:none;font-weight:bold;">âœ‰ï¸ Email ${l}</a>`}}a.innerHTML=n,t.appendChild(a)}}p();
