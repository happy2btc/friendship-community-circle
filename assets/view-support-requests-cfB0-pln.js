import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as i}from"./supabase-vDZkBp_j.js";(async()=>{const{data:n}=await i.auth.getUser(),r=n?.user?.id;r&&localStorage.setItem(`lastReadSupportRequests_${r}`,new Date().toISOString())})();const s=document.getElementById("requests-container");async function d(){const{data:n,error:r}=await i.from("support_requests").select("*").eq("status","active").order("created_at",{ascending:!1});if(r){s.innerHTML=`<p style="color: red;">Error loading requests: ${r.message}</p>`;return}if(!n||n.length===0){s.innerHTML="<p>There are no active support requests at this time.</p>";return}const l=[...new Set(n.map(e=>e.member_in_need_id))],{data:p}=await i.from("profiles").select("id, full_name").in("id",l),u=new Map(p.map(e=>[e.id,e.full_name]));s.innerHTML="";for(const e of n){const a=document.createElement("div");a.className="request-card";const c=u.get(e.member_in_need_id)||"A Circle Member";let t=`<h3>${e.mission_title}</h3>`;t+=`<p><strong>For:</strong> ${c}</p>`,e.mission_description&&(t+=`<p><strong>Mission:</strong> ${e.mission_description}</p>`),e.funding_goal&&(t+=`<p><strong>Goal:</strong> $${e.funding_goal.toLocaleString()}</p>`),e.funds_usage_details&&(t+=`<p><strong>Use of Funds:</strong> ${e.funds_usage_details}</p>`);let o=!1;e.payment_link&&(t+=`<a href="${e.payment_link}" target="_blank" rel="noopener noreferrer" class="support-button">Contribute via Link</a>`,o=!0),e.payment_link_2&&(t+=`<a href="${e.payment_link_2}" target="_blank" rel="noopener noreferrer" class="support-button">Contribute via Alternative Link</a>`,o=!0),o||(t+='<p style="margin-top:1rem;font-style:italic;">Contact the member directly to contribute.</p>'),a.innerHTML=t,s.appendChild(a)}}d();
