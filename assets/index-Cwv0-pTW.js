import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as r}from"./supabase-vDZkBp_j.js";document.addEventListener("DOMContentLoaded",()=>{console.log("Page loaded, checking elements..."),console.log("Welcome section:",document.querySelector(".welcome-section")),console.log("Community description:",document.querySelector(".community-description")),console.log("Sign-in form:",document.querySelector(".sign-in-form")),console.log("Instructions:",document.querySelector(".instructions"));const e=document.querySelector(".welcome-section"),o=document.querySelector(".community-description"),i=document.querySelector(".sign-in-form"),t=document.querySelector(".instructions");e&&(e.style.display="block",console.log("Welcome section made visible")),o&&(o.style.display="block",console.log("Community description made visible")),i&&(i.style.display="block",console.log("Sign-in form made visible")),t&&(t.style.display="block",console.log("Instructions made visible")),console.log("Elements visibility set"),console.log("Supabase loaded:",r),p()});function p(){const e=document.getElementById("sign-in-btn"),o=document.getElementById("email"),i=document.getElementById("password"),t=document.getElementById("sign-up-link"),c=document.getElementById("confirm-btn");console.log("Sign-in button found:",e),console.log("Email input found:",o),console.log("Password input found:",i),console.log("Sign-up link found:",t),e.addEventListener("click",async()=>{const s=o.value,n=i.value;if(console.log("Sign-in button clicked with email:",s),!s||!n){alert("Please enter both email and password");return}e.disabled=!0,e.textContent="Signing In...";try{const{data:l,error:d}=await r.auth.signInWithPassword({email:s,password:n});d?alert("Sign in failed: "+d.message):window.location.href="main-menu.html"}catch(l){alert("Sign in error: "+l.message)}finally{e.disabled=!1,e.textContent="Sign In"}}),t.addEventListener("click",s=>{s.preventDefault(),console.log("Sign-up link clicked");const n=document.createElement("div");n.innerHTML=`
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000;">
                        <div style="background: white; padding: 30px; border-radius: 12px; max-width: 400px; width: 90%;">
                            <h3>Sign Up</h3>
                            <input type="email" id="signup-email" placeholder="Email" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" required>
                            <input type="password" id="signup-password" placeholder="Password" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" required>
                            <input type="text" id="signup-inviter" placeholder="Who invited you?" style="width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;" required>
                            <div style="display: flex; gap: 10px; margin-top: 20px;">
                                <button id="submit-signup" style="flex: 1; background: #2e8b57; color: white; padding: 12px; border: none; border-radius: 6px; cursor: pointer;">Sign Up</button>
                                <button id="cancel-signup" style="flex: 1; background: #ccc; color: black; padding: 12px; border: none; border-radius: 6px; cursor: pointer;">Cancel</button>
                            </div>
                        </div>
                    </div>
                `,document.body.appendChild(n),document.getElementById("submit-signup").addEventListener("click",async()=>{const l=document.getElementById("signup-email").value,d=document.getElementById("signup-password").value,a=document.getElementById("signup-inviter").value;if(!l||!d||!a){alert("Please fill in all fields.");return}try{const{data:u,error:m}=await r.auth.signUp({email:l,password:d,options:{data:{inviter:a}}});m?alert("Sign up failed: "+m.message):(alert("Sign up successful! Please check your email to confirm your account."),document.body.removeChild(n))}catch(u){alert("Sign up error: "+u.message)}}),document.getElementById("cancel-signup").addEventListener("click",()=>{document.body.removeChild(n)})}),c&&(c.style.display="none")}
